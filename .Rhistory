setwd("~/Library/CloudStorage/OneDrive-WilfridLaurierUniversity/Teaching/EC313/assignments")
library(tidyverse)
library(here)
# Read in data
dataorig <- read_csv(here("taxburdentobacco.csv"))
View(dataorig)
library(janitor)
# Read in data
dataorig <- read_csv(here("taxburdentobacco.csv")) %>% clean_names()
View(dataorig)
View(dataorig)
dataorig <- read_csv(here("taxburdentobacco.csv")) %>% clean_names() %>%
select(-c(topic_desc, measure_desc, datasource))
View(dataorig)
names(dataorig)
dataorig <- read_csv(here("taxburdentobacco.csv")) %>% clean_names() %>%
select(c(location_abbr,location_desc,year,sub_measure_desc,data_value ))
dataorig <- read_csv(here("taxburdentobacco.csv")) %>% clean_names() %>%
select(c(location_abbr,location_desc,year,sub_measure_desc,data_value )) %>%
pivot_wider(names_from = sub_measure_desc, values_from = data_value)
View(dataorig)
dataorig <- read_csv(here("taxburdentobacco.csv")) %>% clean_names() %>%
select(c(location_abbr,location_desc,year,sub_measure_desc,data_value )) %>%
pivot_wider(names_from = sub_measure_desc, values_from = data_value) %>%
clean_names()
names(dataorig)
dataorig <- read_csv(here("taxburdentobacco.csv")) %>% clean_names() %>%
select(c(location_abbr,location_desc,year,sub_measure_desc,data_value )) %>%
pivot_wider(names_from = sub_measure_desc, values_from = data_value) %>%
clean_names() %>%
rename(state_abbr = location_abbr, state_name = location_desc,
cost_per_pack = average_cost_per_pack,
state_tax_percent = federal_and_state_tax_as_a_percentage_of_retail_price,
cig_tax_rev = gross_cigarette_tax_revenue,
cig_sales_percapita = cigarette_consumption_pack_sales_per_capita)
dataorig <- read_csv(here("taxburdentobacco.csv")) %>% clean_names() %>%
select(c(location_abbr,location_desc,year,sub_measure_desc,data_value )) %>%
pivot_wider(names_from = sub_measure_desc, values_from = data_value) %>%
clean_names() %>%
rename(state_abbr = location_abbr, state_name = location_desc,
cost_per_pack = average_cost_per_pack,
state_tax_percent = federal_and_state_tax_as_a_percentage_of_retail_price,
cig_tax_rev = gross_cigarette_tax_revenue,
cig_sales_percapita = cigarette_consumption_pack_sales_per_capita,
fed_state_tax_per_pack = federal_and_state_tax_per_pack)
dataorig <- read_csv(here("taxburdentobacco.csv")) %>% clean_names() %>%
select(c(location_abbr,location_desc,year,sub_measure_desc,data_value )) %>%
pivot_wider(names_from = sub_measure_desc, values_from = data_value) %>%
clean_names() %>%
rename(state_abbr = location_abbr, state_name = location_desc,
cost_per_pack = average_cost_per_pack,
fed_state_tax_percent = federal_and_state_tax_as_a_percentage_of_retail_price,
cig_tax_rev = gross_cigarette_tax_revenue,
cig_sales_percapita = cigarette_consumption_pack_sales_per_capita,
fed_state_tax_per_pack = federal_and_state_tax_per_pack)
.42/1.048
library(haven)
write_dta(dataorig, here("taxburdentobacco.dta"))
View(dataorig)
names(dataorig)
